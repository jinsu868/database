1. 외래키를 사용할 때 외래키를 사용하면서 얻는 장점과 단점은 무엇일까요?

> 문진수
>
> 외래키를 사용하면 데이터 무결성을 쉽게 보장할 수 있습니다. 특히 데이터의 참조 관계가 자주 변경되지 않는 경우에 유리합니다. 하지만 외래키 제약조건을 검사하는 데는 성능적인 비용이 들며 운영 환경에서 장애나 복구 상황이 발생했을 때 제약조건으로 인해 데이터 복구가 어려워질 수도 있습니다. 따라서 외래키의 사용 여부는 데이터의 특성을 고려하여 판단해야 합니다.

> 백명규
> 
> 외래키를 사용하면 장점은 테이블 간의 연관관계가 있는 경우 참조 무결성에 대한 체크를 자동적으로 해줍니다. 
> 특정한 키에 대해서 연관관계가 있음에도 불구하고 임의로 데이터를 삭제해버려서 데이터의 일관성을 깨버린다거나 하는 문제점을 방지하는 역할을 합니다.
> 
> 대신, 단점은 개인적으로는 테이블의 구조 변경을 위해 데이터를 옮겨야 하는 상황 등에서 해당 제약 조건으로 옮기는 난이도가 높아집니다. 
> 그리고, 잠금에 대한 전파 가능성이 있습니다. 
> 부모 테이블의 변경이 자식 테이블에 그 반대로도 적용이 됨으로써 데드락의 가능성이 높다진다는 문제가 발생합니다.

---
2. 외래키가 적용된 테이블에서 일어나는 데드락에 관해서 설명해주세요.

> 문진수
>
> 하나의 트랜잭션에서 자식 테이블을 Insert하고 부모 테이블의 컬럼을 변경하는 작업이 있는 경우 해당 트랜잭션이 동시에 여러개 들어오게 되면 데드락이 발생할 수 있습니다. InnoDB의 경우 자식 테이블의 Insert가 발생할 때 부모 테이블에 공유락이 걸리기 때문입니다.

> 백명규
> 
> 부모가 자식에 대해서 영향을 미치는 경우는 세션 A가 부모가 업데이트를 하는 동안 세션 B에서 자식이 외래키를 바꾸는 경우 데드락이 걸립니다.
> 자식이 부모에게 영향을 미치는 경우는 세션 A에서는 자식이 업데이트를 하고 세션 B에서는 연관된 부모를 삭제하는 명령어를 날리는 경우 데드락이 걸립니다.

---