1. 프로젝트에서 Primary Key를 어떻게 설정하셨나요? 해당 설정 값을 PK로 쓰면 얻는 장점과 단점이 뭔가요?

> 문진수
>
> AUTO INCREMENT 인조키를 사용했습니다. PK 기준으로 클러스터링되어 레코드가 저장되기 때문에 지역성을 활용할 수 있습니다. 거의 발생하지 않지만 PK를 Update하게 되면 실제 물리 데이터 저장 위치가 바뀌기 때문에 성능 저하가 발생할 수 있습니다.

> 백명규
> 
> 개인적으로는 Auto Increment로 사용하거나 UUID로 사용했습니다. Auto Increment로 사용을 하면 장점은 식별자를 위한 데이터 크기를 줄일 수 있고, 
> 물리적으로도 순차적으로 쌓이기 때문에 데이터 삽입을 하는 과정에서 DBMS가 들어갈 위치를 찾는데 큰 무리가 없습니다.
> UUID를 사용하는 경우에는 Auto Increment처럼 추측이 불가능한, 임의로 들어가면 안되는 데이터에 대해서 주로 사용을 해본 것 제외하고는 써본 적이 없습니다. 
> 하지만, 특정한 DB에서 다중화를 하거나 하여 Auto Increment로 설정하는 경우 충돌이 나서 데이터 삽입이 안되는 그런 문제가 생길 가능성이 있는 경우에도 UUID를 고려해봐야 한다고 들었습니다.
> 
> ※ 과거에 스터디 땐 아래의 DB 다중화 이야기나 그런 걸 얘기했던 것 같은데.... 뭔가 생각해보니까 아닌 것 같다고 생각을 함.
> 차라리 실제적인 물리적인 위치와 일치하지 않는 랜덤한 위치로 들어가게 되기 때문에 트리 조정 비용이 추가로 발생한다. 쯤으로 이야기하는 게 나을 듯.

---
2. Auto Increment로 설정된 값을 PK로 쓰면 어떤 장점과 단점이 있나요? UUID로 지정했을 때와는 어떤 차이가 있을까요?

> 문진수
>
> AUTO INCREMENT의 경우 순차적으로 증가하는 값을 쓰기 때문에 순차적으로 물리 저장소에 저장되어 지역성을 활용하기 좋습니다. 하지만 분산 환경에서 동시에 Insert가 들어올 경우 충돌 가능성이 있고 ID가 유추 가능하기에 보안상 이슈가 있을 수 있습니다. UUID의 경우 랜덤으로 생성되는 값이기 때문에 무작위로 저장되어 성능 저하가 발생할 수 있습니다. 정렬 가능한 UUID를 사용하면 위 문제도 해결됩니다.

> 백명규
> 
> Auto Increment로 설정된 값을 PK로 쓰면 삽입할 위치를 찾고 해당 위치에 삽입될 때 특정한 페이지 내의 데이터가 밀림으로써 발생하는 트리 리밸런싱과정을 거치지 않아도 되기 때문에 삽입이 빠릅니다. 
> 대신, Auto Increment를 사용하면 다음 데이터 식별자에 대한 추측이 가능하고, 여러 테이블로 나뉘어져있는 경우에 PK값 충돌이 일어날 수 있습니다.

---
3. 데이터베이스의 세컨더리 인덱스 리프노드가 실제적인 데이터의 위치를 가리키는 포인터가 아닌 
PK 정보만 가지고 있는 이유는 무엇이라 생각하시나요?

> 문진수
>
> 세컨더리 인덱스에 리프에 PK가 아니라 실제 물리 주소가 저장되면 클러스터링 인덱스를 사용하는 InnoDB 환경에서 PK 변경에 따라 모든 세컨더리 인덱스의 리프 노드의 ROWID를 변경해야 하기 때문에 그렇습니다.

---